# Kodi skin-unity

Kodi æ˜¯ä¸€æ¬¾ç›¸å½“å¼ºå¤§çš„å¼€æº TV è½¯ä»¶ï¼ŒåŒ…å«äº†éŸ³ä¹ã€è§†é¢‘ã€ç”µè§†ã€å›¾ç‰‡ã€æ¸¸æˆç­‰åŠŸèƒ½ï¼Œæ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œä¸”å®˜æ–¹æ’ä»¶å•†åº—çš„æ’ä»¶éƒ½æ˜¯å…è´¹ä¸”å¼€æºçš„ï¼Œå¯ç©æ€§å¯ä»¥è¯´æ˜¯ç›¸å½“å¼ºäº†ã€‚

Unity æ˜¯ä¸€æ¬¾è®¾è®¡ç›¸å½“å‰å«çš„çš®è‚¤ï¼ŒMaterial Design é£æ ¼ï¼Œç•Œé¢ç›¸å½“ä¼˜ç¾ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰èœå•ã€‚

éŸ³ä¹ä½¿ç”¨ chen310 å¤§ä½¬çš„ç½‘æ˜“äº‘æ’ä»¶[chen310/plugin.audio.music163: ç½‘æ˜“äº‘éŸ³ä¹ Kodi æ’ä»¶ (github.com)](https://github.com/chen310/plugin.audio.music163)ï¼Œåœ¨ç”µè§†ä¸Šç”¨æ‰‹æœºçš„ VIPï¼Œç€å®å¾ˆçˆ½ï¼Œä½†æ’­æ”¾ç•Œé¢æœ‰ç‚¹æ“è›‹ï¼š

- æ‰“å¼€æ’­æ”¾é¡µï¼Œæ­Œæ›²ä¿¡æ¯å’Œæ­Œè¯å åŠ æ˜¾ç¤ºï¼Œæ­Œè¯è¿˜æœ‰èƒŒæ™¯æ¡†:dog:ï¼Œç­‰ä¸€ä¼šæ‰ä¼šåªæ˜¾ç¤ºæ­Œè¯ï¼Œè€Œä¸”èƒŒæ™¯ä¸€ç‰‡é»‘
- è¿”å›å…³é—­æ­Œè¯ï¼Œç„¶åä¸€ç‰‡é»‘ï¼Œå†è¿”å›æ‰é€€å‡ºæ’­æ”¾é¡µ

ç”¨äº† chen310 å¤§ä½¬ä¿®æ”¹çš„ Unity çš®è‚¤[ã€å›¾ç‰‡ã€‘åœ¨ Kodi ä¸­ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹æ’ä»¶å¬æ­Œã€kodiå§ã€‘_ç™¾åº¦è´´å§ (baidu.com)](https://tieba.baidu.com/p/8021470008)ï¼š

- æ­Œè¯èƒŒæ™¯æ¡†æ²¡äº†
- æ­Œè¯å±…ä¸­
- æ­Œè¯æœ‰æ­Œæ›²å›¾ç‰‡èƒŒæ™¯äº†

ä½†ï¼š

- æ‰“å¼€æ’­æ”¾é¡µï¼Œæ­Œæ›²ä¿¡æ¯å’Œæ­Œè¯å åŠ æ˜¾ç¤ºï¼Œç­‰ä¸€ä¼šæ‰ä¼šåªæ˜¾ç¤ºæ­Œè¯
- è¿”å›å…³é—­æ­Œè¯ï¼Œç„¶åä¸€ç‰‡é»‘ï¼Œå†è¿”å›æ‰é€€å‡ºæ’­æ”¾é¡µ

çœ‹æ¥å¤§ä½¬å·²ç»æŠŠéš¾æçš„éƒ¨åˆ†æå¥½äº†ï¼Œå¼€æºçš„ä¹ˆï¼Œæ•´æ¥çœ‹çœ‹èƒ½ä¸èƒ½è§£å†³ä¸‹å‰©ä½™çš„é—®é¢˜ã€‚

zip è§£åŒ…å¤§ä½¬ä¿®æ”¹çš„ skin.unityï¼Œæ‰“å¼€ä»£ç ä¸€çœ‹ï¼Œå…¨æ˜¯å¸ƒå±€æ–‡ä»¶ï¼Œæ‹¿ç•Œé¢ä¸­çš„æ–‡å­—å»æœç´¢ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°ï¼Œæ‹¿å¸ƒå±€æ–‡ä»¶åå»æœç´¢ï¼Œä¹Ÿæ˜¯æ‰¾ä¸åˆ°ï¼Œå®Œå…¨ä¸çŸ¥é“æ˜¯æ€ä¹ˆè°ƒç”¨çš„ã€‚ã€‚ã€‚

ç»è¿‡ç ”ç©¶ï¼Œç©æ˜ç™½çš„ï¼š

### è¯­æ³•

æ­Œæ›²å°é¢å›¾ï¼š`$INFO[MusicPlayer.offset(0).Cover]`

è¿˜æœ‰å¤–é¢å†å¥—ä¸€å±‚`$INFO[]`çš„ï¼Œä¸çŸ¥é“æ˜¯ä½•æ„

é€»è¾‘è¡¨è¾¾å¼ï¼š

```java
// ä¸
Player.ShowInfo + Window.IsActive(MusicOSD)
// æˆ–
Player.ShowInfo | Window.IsActive(MusicOSD)
// åµŒå¥—
[Player.ShowInfo | Window.IsVisible(script-cu-lrclyrics-main.xml)] + Window.IsActive(MusicOSD)
```

è®¾ç½®é¡¹ï¼š`Skin.HasSetting(HideVisualizationFanart)`

æ˜¯å¦æœ‰å¯è§†åŒ–æ’ä»¶ï¼š`String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image))`

æ­Œæ›²æ§ä»¶æ˜¯å¦æ˜¾ç¤ºï¼š`Window.IsActive(MusicOSD)`

æ­Œè¯æ˜¯å¦æ‰“å¼€ï¼š`Window.IsVisible(script-cu-lrclyrics-main.xml)`

### Window | çª—å£

å…¨éƒ¨çª—å£ï¼š[Kodi Development: WindowIDs (xbmc.github.io)](https://xbmc.github.io/docs.kodi.tv/master/kodi-dev-kit/window_ids.html)

çª—å£æ˜¯å¦å¯è§ï¼š`Window.IsVisible(SelectDialog)`

### Control | æ§ä»¶

```xml
<control type="image">
    <description>Fanart Image for Artist</description>
    <aspectratio>scale</aspectratio>
    <fadetime>400</fadetime>
    <animation effect="fade" start="0" end="100" time="400">WindowOpen</animation>
    <animation effect="fade" start="100" end="0" time="300">WindowClose</animation>
    <animation effect="fade" start="100" end="75" condition="Control.IsVisible(2)">Conditional</animation>
    <left>0</left>
    <top>0</top>
    <width>100%</width>
    <height>100%</height>
    <texture background="true">$INFO[MusicPlayer.offset(0).Cover]</texture>
    <visible>String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image)) + !Skin.HasSetting(HideVisualizationFanart)</visible>
</control>
```

å±…ä¸­ï¼š`<centerleft>50%</centerleft>`ï¼ˆä¸­å¿ƒè·å·¦è¾¹50%ï¼Œå¯ä¸å°±æ˜¯å±…ä¸­ä¹ˆï¼‰

è¢«æ˜¾ç¤ºæ—¶çš„åŠ¨ç”»ï¼š`<animation effect="fade" start="0" end="100" time="200">Visible</animation>`

è¢«éšè—æ—¶çš„åŠ¨ç”»ï¼š`<animation effect="fade" start="100" end="0" time="200">Hidden</animation>`

å…¨éƒ¨å±æ€§ï¼š[Default control tags - Official Kodi Wiki](https://kodi.wiki/view/Default_control_tags)

> [Kodi Development: Skin Development (xbmc.github.io)](https://xbmc.github.io/docs.kodi.tv/master/kodi-dev-kit/skin_parts.html)

è¿å®˜æ–¹éƒ½è¯´çš®è‚¤å¤æ‚ï¼Œå¯ç®—æ˜¯å¤§æ¦‚äº†è§£å®ƒæ€ä¹ˆè¿ä½œçš„äº†ï¼šé¡µé¢æ“ä½œé€»è¾‘ã€è°ƒç”¨æ˜¯ç¨‹åºå›ºå®šçš„ï¼Œçš®è‚¤åªæ˜¯å¯ä»¥ä¿®æ”¹ç•Œé¢ã€åŠ¨ç”»ç­‰ï¼Œæ‰€ä»¥å•çº¯ä»çš®è‚¤é‡Œï¼Œæ˜¯æ‰¾ä¸åˆ°è°ƒç”¨é€»è¾‘çš„

### é¡µé¢

æ’­æ”¾é¡µï¼š`xml\MusicVisualisation.xml`

éŸ³ä¹æ§ä»¶ï¼š`xml\MusicOSD.xml`

æ­Œè¯ï¼š`xml\script-cu-lrclyrics-main.xml`

# æ’­æ”¾é¡µé¢çš„é»‘è‰²æ”¹ä¸ºæ­Œæ›²å°é¢

åœ¨æ’­æ”¾é¡µä¸­å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€æ®µï¼š

```xml
<control type="visualisation" id="2">
    <description>visualisation</description>
    <left>0</left>
    <top>0</top>
    <width>100%</width>
    <height>100%</height>
    <visible>!String.IsEmpty(Visualisation.Name)</visible>
</control>
<control type="image">
    <description>Fanart Image for Artist</description>
    <aspectratio>scale</aspectratio>
    <fadetime>400</fadetime>
    <animation effect="fade" start="0" end="100" time="400">WindowOpen</animation>
    <animation effect="fade" start="100" end="0" time="300">WindowClose</animation>
    <animation effect="fade" start="100" end="75" condition="Control.IsVisible(2)">Conditional</animation>
    <left>0</left>
    <top>0</top>
    <width>100%</width>
    <height>100%</height>
    <texture background="true">$INFO[Player.Art(fanart)]</texture>
    <visible>String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image)) + !Skin.HasSetting(HideVisualizationFanart)</visible>
</control>
<control type="image">
    <aspectratio>scale</aspectratio>
    <fadetime>400</fadetime>
    <animation effect="fade" start="0" end="100" time="400">WindowOpen</animation>
    <animation effect="fade" start="100" end="0" time="300">WindowClose</animation>
    <animation effect="fade" start="100" end="75" condition="Control.IsVisible(2)">Conditional</animation>
    <left>0</left>
    <top>0</top>
    <width>100%</width>
    <height>100%</height>
    <texture background="true">$INFO[Window(Visualisation).Property(ArtistSlideshow.Image)]</texture>
    <visible>!String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image)) + !Skin.HasSetting(HideVisualizationFanart) + !Skin.HasSetting(DisableArtistSlideshow)</visible>
</control>
```

å…±æœ‰ä¸‰ä¸ªå¤§å°100%çš„æ§ä»¶

- ç¬¬ä¸€ä¸ªæ˜¯å¯è§†åŒ–
- ç¬¬äºŒä¸ªæ˜¯åœ¨å¯è§†åŒ–æ’ä»¶æ²¡æœ‰å›¾ç‰‡çš„æƒ…å†µæ˜¾ç¤ºä¸ªä»€ä¹ˆ`Player.Art?`
- ç¬¬ä¸‰ä¸ªæ˜¯åœ¨å¯è§†åŒ–æ’ä»¶æœ‰å›¾ç‰‡çš„æƒ…å†µæ˜¾ç¤ºå¯è§†åŒ–çš„å›¾ç‰‡

ä¸çŸ¥é“å¯è§†åŒ–å›¾ç‰‡æ˜¯ä¸ªä»€ä¹ˆï¼Œå°±æ”¹ç¬¬äºŒä¸ªå§

```xml
<control type="image">
    <description>Fanart Image for Artist</description>
    <aspectratio>scale</aspectratio>
    <fadetime>400</fadetime>
    <animation effect="fade" start="0" end="100" time="400">WindowOpen</animation>
    <animation effect="fade" start="100" end="0" time="300">WindowClose</animation>
    <animation effect="fade" start="100" end="75" condition="Control.IsVisible(2)">Conditional</animation>
    <left>0</left>
    <top>0</top>
    <width>100%</width>
    <height>100%</height>
    <texture background="true">$INFO[MusicPlayer.offset(0).Cover]</texture>
    <visible>String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image)) + !Skin.HasSetting(HideVisualizationFanart)</visible>
</control>
```

è¿™é‡Œæ˜¾ç¤ºç€å›¾ï¼Œå¤§ä½¬æ”¹çš„æ­Œè¯ç•Œé¢çš„å›¾å°±æ²¡å¿…è¦äº†ï¼Œåˆ æ‰è¿™ä¸€æ®µï¼š

```xml
<control type="image">
    <description>background image</description>
    <top>-80</top>
    <width>100%</width>
    <height>100%</height>
    <aspectratio>scale</aspectratio>
    <animation effect="fade" start="0" end="100" time="300">WindowOpen</animation>
    <animation effect="fade" start="100" end="0" time="200">WindowClose</animation>
    <texture colordiffuse="C2AAAAAA">$INFO[MusicPlayer.offset(0).Cover]</texture>
</control>
```

è¿™æ ·å·²æ”¹æ•ˆæœå°±å¥½å¤šäº†

# æ­Œæ›²ä¿¡æ¯æ˜¾ç¤º

![1699621350222](assets/1699621350222.png)

æˆ‘æ›´å¸Œæœ›æ’­æ”¾é¡µé¢è¿™æ ·ï¼š

- ä¸€ç›´æ˜¾ç¤ºæ­Œæ›²ä¿¡æ¯ï¼ˆé»˜è®¤æˆ–ä»æ­Œè¯è¿”å›åï¼‰
- æ˜¾ç¤ºæ­Œè¯æ—¶éšè—æ­Œæ›²ä¿¡æ¯

æ’­æ”¾é¡µå¾€ä¸‹æ‰¾ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªæ§ä»¶

```xml
<control type="group">
    <centerleft>50%</centerleft>
    <top>283r</top>
    <width>1140</width>
```

è§‚å¯Ÿé‡Œé¢çš„æ§ä»¶ï¼ŒåŒ…å«äº†å°å°é¢ã€æ­Œæ‰‹ã€æ­Œæ›²ã€æ—¶é—´ç­‰ä¿¡æ¯ï¼Œè¿™ä¸€å—å°±æ˜¯æ­Œæ›²ä¿¡æ¯ï¼Œä»–çš„`visible`å±æ€§ä¸ºï¼š

```java
[Skin.HasSetting(AlwaysShowMusicInfo) | Player.ShowInfo | Window.IsActive(MusicOSD)] + ![Window.IsVisible(AddonSettings) | Window.IsVisible(SelectDialog) | Window.IsVisible(VisualisationPresetList) | Window.IsVisible(PVROSDChannels) | Window.IsVisible(PVRChannelGuide) | Window.IsVisible(PVRRadioRDSInfo) | Window.IsVisible(Addon)]
```

é€»è¾‘æ˜¯ï¼šçš®è‚¤è®¾ç½®äº†æ€»æ˜¯å±•ç¤ºæ­Œæ›²ä¿¡æ¯ï¼Œæˆ–æ§ä»¶æ˜¾ç¤ºï¼Œæˆ–`Player.ShowInfo`ï¼Œå¹¶ä¸”æ²¡æœ‰æ‰“å¼€çª—å£æ—¶ï¼Œæ˜¾ç¤ºæ­Œæ›²ä¿¡æ¯ï¼Œè¦ä¿®æ”¹è¿™é‡Œå°±å¾ˆç®€å•äº†ï¼š

- åœ¨æ˜¾ç¤ºçš„æƒ…å†µä¸­æ·»åŠ æ­Œè¯æœªæ˜¾ç¤º
- åœ¨éšè—çš„æƒ…å†µä¸­æ·»åŠ æ­Œè¯æ˜¾ç¤º

```java
[Skin.HasSetting(AlwaysShowMusicInfo) | Player.ShowInfo | Window.IsActive(MusicOSD) | !Window.IsVisible(script-cu-lrclyrics-main.xml)] + ![Window.IsVisible(script-cu-lrclyrics-main.xml) | Window.IsVisible(AddonSettings) | Window.IsVisible(SelectDialog) | Window.IsVisible(VisualisationPresetList) | Window.IsVisible(PVROSDChannels) | Window.IsVisible(PVRChannelGuide) | Window.IsVisible(PVRRadioRDSInfo) | Window.IsVisible(Addon)]
```

### OSD å¤„ç†

ç»ä¸Šè¿°ä¿®æ”¹ï¼Œæµ‹è¯•å‘ç°ï¼Œæ­Œæ›²ä¿¡æ¯å·²ç»æŒ‰é¢„æœŸæ˜¾ç¤ºéšè—ï¼Œä½†æ§ä»¶éƒ¨åˆ†ä¸å—æ§åˆ¶ï¼ŒåŸå› æ˜¯**æ§ä»¶å¹¶æœªåŒ…å«åœ¨ä¸Šè¿°çš„ control ä¸­ï¼Œè€Œæ˜¯ç‹¬ç«‹çš„åä¸º`MusicOSD`çš„æ§ä»¶**ï¼Œä»¥ç›®å‰çš„æŒæ¡ç¨‹åº¦ï¼Œè¿™ä¸ªæ§ä»¶çš„æ˜¾ç¤ºéšè—ä¼¼ä¹å¾ˆéš¾å»æ§åˆ¶äº†ï¼ˆæˆ–è€…ä¸èƒ½æ§åˆ¶ï¼‰ã€‚

æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£å°±ä»å®ƒå¸¦æ¥çš„å½±å“ç€æ‰‹è§£å†³äº†ï¼šå°å°é¢çš„é«˜åº¦ = æ­Œæ›²ä¿¡æ¯ + OSDï¼Œæ‰€ä»¥ OSD éšè—æ‰åä¼šå¾ˆéš¾çœ‹ï¼Œè§£å†³åŠæ³•ï¼š

- OSD æ˜¾ç¤ºæ—¶ï¼Œå°å°é¢çš„é«˜åº¦ = æ­Œæ›²ä¿¡æ¯ + OSD
- OSD éšè—æ—¶ï¼Œå°å°é¢çš„é«˜åº¦ = æ­Œæ›²ä¿¡æ¯

çœŸæ˜¯ä¸€ä¸ªå¤©æ‰çš„æƒ³æ³•ğŸ¥°

å¤åˆ¶ä¸€ä»½å°å°é¢å¹¶ä¿®æ”¹ä½ç½®å¤§å°ä¿¡æ¯ï¼š

```xml
<control type="image">
    <description>cover image</description>
    <left>-250</left>
    <top>-2</top>
    <width>263</width>
    <height>263</height>
    <visible>Window.IsActive(musicosd)</visible>
    <animation effect="fade" start="0" end="100" time="200">Visible</animation>
    <animation effect="fade" start="100" end="0" time="200">Hidden</animation>
    <texture fallback="DefaultAlbumCover.png">$INFO[MusicPlayer.offset(0).Cover]</texture>
    <aspectratio aligny="bottom">keep</aspectratio>
    <bordertexture border="8">ThumbShadow.png</bordertexture>
    <bordersize>8</bordersize>
</control>
<control type="image">
    <description>cover image</description>
    <left>-180</left>
    <top>-2</top>
    <width>193</width>
    <height>193</height>
    <visible>!Window.IsActive(musicosd)</visible>
    <animation effect="fade" start="0" end="100" time="200">Visible</animation>
    <animation effect="fade" start="100" end="0" time="200">Hidden</animation>
    <texture fallback="DefaultAlbumCover.png">$INFO[MusicPlayer.offset(0).Cover]</texture>
    <aspectratio aligny="bottom">keep</aspectratio>
    <bordertexture border="8">ThumbShadow.png</bordertexture>
    <bordersize>8</bordersize>
</control>
```

è®¡ç®—æ–¹å¼ï¼šPS æµ‹é‡å°å°é¢é«˜ 247pxï¼ˆæ§ä»¶ä¸­`width`å±æ€§åŒ…å«è¾¹æ¡†ï¼Œæ‰€ä»¥ä¸ä¸€è‡´ï¼‰ï¼Œæ­Œæ›²ä¿¡æ¯é«˜ 177pxï¼Œå­˜åœ¨ 70px çš„å·®å€¼ï¼Œæ‰€ä»¥

- å®½é«˜ç›´æ¥å‡å» 70
- å°å°é¢ç›¸å¯¹çˆ¶æ§ä»¶å·¦ä½ç½®ä¸ºè´Ÿï¼Œæ›´å°çš„å°é¢åº”è¯¥å°‘è´Ÿ 70

åè®°ï¼šOSD æ— æ³•æ§åˆ¶æ˜¾ç¤ºï¼Œä½†å®ƒå†…éƒ¨çš„æ§ä»¶éƒ½åœ¨`MusicOSD`æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥éšè—è¿˜æ˜¯å¯ä»¥æ§åˆ¶çš„